ServerConfiguration:
  meta:
    topLevel: false
    sensitive:
      - enableCertbot
      - privateKey
  properties:
    baseUrl: string(1024)?
    realmName: string(512)?
    realmLogo: string(512)?
MailConfiguration:
  meta:
    topLevel: false
    sensitive:
      - username
      - password
      - serverAddress
      - tlsSslRequired
      - port
      - fromAddress
  properties:
    serverAddress: string?
    username: string?
    password: string?
    tlsSslRequired: boolean?
    port: integer?
    fromAddress: string?

SecurityConfiguration:
  meta:
    topLevel: false
  properties:
    maxLoginAttemptsPerMinute: integer?
    maxPasswordAge: integer?
    passwordRequiresLowercase: boolean?
    passwordRequiresUppercase: boolean?
    passwordRequiresNumber: boolean?
    passwordRequiresSymbol: boolean?
    passwordMinimumLength: integer?
    multifactorRequired: boolean?
    requireEmailAddressVerification: boolean?
    passwordHistoryEnabled: boolean?
    passwordHistoryCount: integer?
    invitationExpirationSeconds: integer?
    accessTokenExpirationSeconds: integer?
    domainWhitelist: string(1024)?
    allowSignup: boolean? default(0)

Configuration:
  meta:
    topLevel: true
  properties:
    Security:
      modelRef: SecurityConfiguration
    Mail:
      modelRef: MailConfiguration
    Server:
      modelRef: ServerConfiguration
  operations:
    saveConfiguration:
      returns: OperationResponse
      arguments:
        Security:
        Mail:
        Server:
